# Todolist 项目任务清单（依据技术文档）

## 里程碑概览
- M1：后端 CRUD + 校验 + 分页/筛选/排序 + 错误处理
- M2：前端列表/详情/表单 + 状态快捷切换 + 删除确认
- M3：本地缓存与重试、基础测试、健康检查

---

## 任务拆分

### M1 后端基础（FastAPI）
1. 后端项目初始化（Python 虚拟环境、依赖、ruff/black 配置、dotenv）
2. 数据库初始化（SQLite 文件、SQLAlchemy/SQLModel 连接、Alembic 迁移）
3. 建表与索引迁移（todos 表 + status/priority/created_at 索引）
4. 应用与中间件：FastAPI + CORSMiddleware，限流（slowapi，可选）、JSON 解析、日志
5. 校验：Pydantic 模型（body/query/path）与枚举/长度限制
6. 数据访问层（Repository/CRUD）：
   - 新增：create_todo(title, ...)
   - 查询：list_todos(filters, pagination, sorting)
   - 详情：get_todo_by_id(id)
   - 更新：update_todo(id, partial)
   - 删除：delete_todo(id)
7. 服务层：业务逻辑与错误映射
8. 路由层/控制器：请求/响应处理、统一异常处理
9. 分页/筛选/排序实现（白名单字段与上限）
10. 健康检查路由 `/api/health`
11. 日志：uvicorn/标准 logging（必要时结构化）

### M2 前端功能（Next.js）
12. 前端项目初始化（Next.js/TS，eslint/prettier，App Router）
13. API 客户端封装（Axios/Fetch：baseURL、错误处理、重试策略）
14. React Query 配置与 hooks（useTodosList/useTodoDetail）
15. 列表页（app/page.tsx）：
    - 展示任务（分页、排序、筛选、搜索）
    - 状态快捷切换（乐观更新、失败回滚）
16. 详情页（app/todos/[id]/page.tsx）
17. 创建/编辑页（app/todos/new/page.tsx、app/todos/[id]/edit/page.tsx，React Hook Form + Zod）
18. 删除操作（确认对话框）
19. 空态/加载态/错误态组件与统一提示

### M3 增强与测试
20. 本地缓存持久化（可选）
21. 失败重试策略（指数退避，最大重试次数）
22. 单元测试（服务/仓储层）
23. 集成测试（路由、校验、错误处理）
24. E2E（可选）关键流程：创建→列表→更新→删除
25. 部署脚本与配置（Nginx 反向代理示例）
26. Docker 化（可选：backend/frontend）
27. 文档与验收清单更新

---

## 验收标准（摘要）
- 接口遵循技术文档中的契约，返回格式一致
- 分页/筛选/排序可用，边界参数有上限校验
- 前端交互完整：加载/空态/错误提示、二次确认、乐观更新
- 安全防御到位：校验、速率限制、ORM 参数化查询、helmet
- 测试通过：核心逻辑单元/集成测试稳定
- 健康检查可用，基础日志可审计
